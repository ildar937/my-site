<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>До / После — 4 слайдера</title>
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <style>
    *,*::before,*::after{box-sizing:border-box}
    html,body{margin:0;padding:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:#0b0c10;color:#e8e8e8}
    h1,h2{margin:16px 0;line-height:1.25}
    .wrap{max-width:1100px;margin:0 auto;padding:24px 16px 96px}
    .grid{display:grid;gap:28px}
    @media(min-width:900px){.grid{grid-template-columns:1fr 1fr}}

    /* Контакты */
    .contacts{display:flex;flex-wrap:wrap;gap:10px;margin:4px 0 18px}
    .pill{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;background:#111318;border:1px solid #1f2330;border-radius:999px;color:#e8e8e8;text-decoration:none;font-weight:700;font-size:14px}
    .pill:hover{background:#151925}

    /* Карточки */
    .card{background:#111318;border:1px solid #1f2330;border-radius:16px;padding:16px 16px 20px;box-shadow:0 6px 18px rgba(0,0,0,.25)}
    .card h2{font-size:18px;margin-bottom:12px;color:#f1f5f9}

    /* Слайдер До/После */
    .ba{--pos:50%;position:relative;border-radius:14px;overflow:hidden;user-select:none;touch-action:none;background:#0d0f14}
    .ba-images{position:relative;width:100%}
    .ba-after{position:relative;z-index:1;display:block;width:100%;height:auto}          /* справа (После) — нижний слой */
    .ba-before{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;z-index:2; /* слева (До) — верхний слой */
      clip-path:polygon(0 0,var(--pos) 0,var(--pos) 100%,0 100%);will-change:clip-path}
    .ba-divider{position:absolute;inset:0;z-index:3;pointer-events:none}
    .ba-divider::before{content:"";position:absolute;top:0;bottom:0;left:var(--pos);width:2px;background:rgba(255,255,255,.9);box-shadow:0 0 0 1px rgba(0,0,0,.35);transform:translateX(-1px)}
    .ba-handle{position:absolute;left:var(--pos);top:50%;transform:translate(-50%,-50%);width:40px;height:40px;border-radius:50%;background:#fff;color:#111318;font-weight:800;display:grid;place-items:center;font-size:16px;box-shadow:0 6px 16px rgba(0,0,0,.35),inset 0 0 0 2px rgba(0,0,0,.12)}
    .ba-label{position:absolute;top:12px;z-index:4;padding:6px 10px;border-radius:12px;background:rgba(0,0,0,.55);color:#fff;font-weight:700;font-size:13px}
    .ba-label-before{left:12px}.ba-label-after{right:12px}
    .ba-range{position:absolute;left:50%;transform:translateX(-50%);bottom:12px;width:clamp(200px,60%,560px);z-index:5;-webkit-appearance:none;appearance:none;height:6px;background:rgba(255,255,255,.25);border-radius:999px;outline:none}
    .ba-range::-webkit-slider-thumb,.ba-range::-moz-range-thumb{width:18px;height:18px;border-radius:50%;background:#fff;border:2px solid rgba(0,0,0,.25);box-shadow:0 2px 8px rgba(0,0,0,.35);cursor:pointer}

    /* Плавающие кнопки */
    .fab{position:fixed;right:18px;z-index:50;width:58px;height:58px;border-radius:50%;color:#fff;text-decoration:none;display:grid;place-items:center;font-weight:800;font-size:14px;box-shadow:0 10px 24px rgba(0,0,0,.35)}
    .tg-fab{bottom:88px;background:#2AABEE}
    .wa-fab{bottom:18px;background:#25D366}
    .fab:focus-visible{outline:3px solid #93c5fd;outline-offset:3px}
    .fab small{font-size:11px;font-weight:700;opacity:.95}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>До → После: 4 примера</h1>

    <!-- Контакты -->
    <div class="contacts" aria-label="Контакты">
      <a class="pill" href="https://t.me/foodfox_eldar_gainutdinov" target="_blank" rel="noopener">Telegram (личный)</a>
      <a class="pill" href="https://t.me/ai_do_after" target="_blank" rel="noopener">Канал (AI До/После)</a>
      <a class="pill" href="mailto:eldargainutdinoff@yandex.ru?subject=%D0%97%D0%B0%D0%BA%D0%B0%D0%B7%20AI-%D0%B4%D0%B8%D0%B7%D0%B0%D0%B9%D0%BD&body=%D0%97%D0%B4%D1%80%D0%B0%D0%B2%D1%81%D1%82%D0%B2%D1%83%D0%B9%D1%82%D0%B5!%20%D0%A5%D0%BE%D1%87%D1%83%20%D0%BE%D1%84%D0%BE%D1%80%D0%BC%D0%B8%D1%82%D1%8C%20%D0%B7%D0%B0%D0%B7%D0%B0%D0%B7.">Email</a>
      <a id="price-link" class="pill" href="#" target="_blank" rel="noopener">Скачать прайс (PNG)</a>
    </div>

    <div class="grid">
      <!-- Кроссовки -->
      <section class="card">
        <h2>Кроссовки</h2>
        <div class="ba" data-swap="1">
          <div class="ba-images">
            <img class="ba-after"  data-name="krossovki-after.jpg"  alt="Кроссовки — После">
            <img class="ba-before" data-name="krossovki-before.jpg" alt="Кроссовки — До">
          </div>
          <div class="ba-divider"><div class="ba-handle"><span>↔</span></div></div>
          <div class="ba-label ba-label-before">До</div><div class="ba-label ba-label-after">После</div>
          <input class="ba-range" type="range" min="0" max="100" value="50" />
        </div>
      </section>

      <!-- Товар -->
      <section class="card">
        <h2>Товар</h2>
        <div class="ba" data-swap="1">
          <div class="ba-images">
            <img class="ba-after"  data-name="product-after.jpg"  alt="Товар — После">
            <img class="ba-before" data-name="product-before.jpg" alt="Товар — До">
          </div>
          <div class="ba-divider"><div class="ba-handle"><span>↔</span></div></div>
          <div class="ba-label ba-label-before">До</div><div class="ba-label ba-label-after">После</div>
          <input class="ba-range" type="range" min="0" max="100" value="50" />
        </div>
      </section>

      <!-- Наушники -->
      <section class="card">
        <h2>Наушники</h2>
        <div class="ba" data-swap="1">
          <div class="ba-images">
            <img class="ba-after"  data-name="headphones-after.jpg"  alt="Наушники — После">
            <img class="ba-before" data-name="headphones-before.jpg" alt="Наушники — До">
          </div>
          <div class="ba-divider"><div class="ba-handle"><span>↔</span></div></div>
          <div class="ba-label ba-label-before">До</div><div class="ba-label ba-label-after">После</div>
          <input class="ba-range" type="range" min="0" max="100" value="50" />
        </div>
      </section>

      <!-- Часы -->
      <section class="card">
        <h2>Часы</h2>
        <div class="ba" data-swap="1">
          <div class="ba-images">
            <img class="ba-after"  data-name="watch-after.jpg"  alt="Часы — После">
            <img class="ba-before" data-name="watch-before.jpg" alt="Часы — До">
          </div>
          <div class="ba-divider"><div class="ba-handle"><span>↔</span></div></div>
          <div class="ba-label ba-label-before">До</div><div class="ba-label ba-label-after">После</div>
          <input class="ba-range" type="range" min="0" max="100" value="50" />
        </div>
      </section>
    </div>
  </div>

  <!-- FAB: Telegram -->
  <a class="fab tg-fab" href="https://t.me/foodfox_eldar_gainutdinov" target="_blank" rel="noopener" title="Telegram"><small>TG</small></a>
  <!-- FAB: WhatsApp -->
  <a class="fab wa-fab" href="https://wa.me/79031696661?text=%D0%97%D0%B4%D1%80%D0%B0%D0%B2%D1%81%D1%82%D0%B2%D1%83%D0%B9%D1%82%D0%B5!%20%D0%A5%D0%BE%D1%87%D1%83%20%D0%BE%D1%84%D0%BE%D1%80%D0%BC%D0%B8%D1%82%D1%8C%20%D0%B7%D0%B0%D0%BA%D0%B0%D0%B7." target="_blank" rel="noopener" title="WhatsApp"><small>WA</small></a>

  <script>
    // Пара путей: 1) assets/, 2) закодированная папка "авуары/"
    const PATHS = ["assets/", "%D0%B0%D0%B2%D1%83%D0%B0%D1%80%D1%8B/"];
    const CACHE_Q = "?v=" + Date.now();

    // Установить src с падением на второй путь при ошибке
    function setWithFallback(img, filename) {
      let tried = 0;
      function tryNext() {
        img.src = PATHS[tried] + filename + CACHE_Q;
      }
      img.onerror = () => {
        tried++;
        if (tried < PATHS.length) { img.onerror = null; tryNext(); }
      };
      tryNext();
    }

    // Инициализация всех слайдеров
    (function(){
      document.querySelectorAll('.ba').forEach((ba)=>{
        const bef = ba.querySelector('.ba-before');
        const aft = ba.querySelector('.ba-after');

        // имена файлов
        let beforeName = bef.dataset.name;
        let afterName  = aft.dataset.name;

        // если файлы перепутаны — меняем местами
        if (ba.dataset.swap === "1") {
          const t = beforeName; beforeName = afterName; afterName = t;
        }

        // грузим с fallback (assets/ -> "авуары/")
        setWithFallback(bef, beforeName);
        setWithFallback(aft, afterName);

        // слайдер
        const range = ba.querySelector('.ba-range');
        const setPos = (p)=>{ p=Math.max(0,Math.min(100,+p)); ba.style.setProperty('--pos',p+'%'); range.value=p; };
        setPos(50);
        range.addEventListener('input', e=>setPos(e.target.value));
        const move = (e)=>{ const r=ba.getBoundingClientRect(); const x=Math.max(r.left,Math.min(e.clientX,r.right))-r.left; setPos((x/r.width)*100); };
        ba.addEventListener('pointerdown', e=>{ ba.setPointerCapture?.(e.pointerId); move(e); ba.addEventListener('pointermove', move); });
        ba.addEventListener('pointerup',   e=>{ ba.releasePointerCapture?.(e.pointerId); ba.removeEventListener('pointermove', move); });
        ba.addEventListener('pointerleave',()=> ba.removeEventListener('pointermove', move));
      });

      // Прайс: ставим ссылку с тем же fallback (assets -> "авуары")
      const priceLink = document.getElementById('price-link');
      const trySrc = PATHS[0] + "price_a4.png" + CACHE_Q;
      const img = new Image();
      img.onload  = ()=> priceLink.href = trySrc;
      img.onerror = ()=> priceLink.href = PATHS[1] + "price_a4.png" + CACHE_Q;
      img.src = trySrc;
    })();
  </script>
</body>
</html>
